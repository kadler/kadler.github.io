<!DOCTYPE html>
<html lang="en">

<head>
    <title>IBM i Open Source Updates December 2020</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://kadler.io/style.css">
    <link rel="stylesheet" href="https://kadler.io/color/pink.css">

        <link rel="stylesheet" href="https://kadler.io/color/background_blue.css">
    
    <link rel="stylesheet" href="https://kadler.io/font-hack-subset.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="Korinne's Ramblings">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://kadler.io/blog/2020-12-23-dec-oss-updates/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="Korinne's Ramblings">
    <meta property="twitter:domain" content="kadler.io">
    <meta property="twitter:url" content="https://kadler.io/blog/2020-12-23-dec-oss-updates/">

    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>
</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://kadler.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            Korinne&#x27;s Ramblings
                        
                    </div>
                </a>
            </div>
        </div>

        
        <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://kadler.io/blog">blog</a></li>
            
                <li><a href="https://kadler.io/tags">tags</a></li>
            
                <li><a href="https://kadler.io/about">about</a></li>
            
                <li><a href="https://kadler.io/ebcdic">ebcdic</a></li>
            
                <li><a href="https://github.com/kadler" target="_blank" rel="noopener noreferrer">github</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://kadler.io/blog/2020-12-23-dec-oss-updates/">IBM i Open Source Updates December 2020</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2020-12-23
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://kadler.io/tags/ibmi-oss-updates/">#ibmi-oss-updates</a></span>
    

        <div class="post-content">
            <p>Being the holiday and end of year season here in Rochester, things are wrapping
up for the year so I figured I'd put out my December update now instead of next
month. Consider it an early Xmas present - just watch out for Santa's bicycle
gun! üòâ</p>

  
  
    
    
  
  <img src="https://kadler.io/images/futurama-xmas.jpg" alt="The Santa robot crashing Futurama&#x27;s Xmas party" class="center" decoding="async" loading="lazy"/>

<span id="continue-reading"></span><h2 id="new-packages">New Packages</h2>
<h3 id="cronie">cronie</h3>
<p><code>cron</code> has finally come to IBM i!
<a href="https://github.com/cronie-crond/cronie">cronie</a> is a modern version of the cron
daemon, used by the majority of Linux distributions and based off the original
cron written by Paul Vixie.</p>
<p>To start cron, simply run <code>crond</code> from a user with <code>*ALLOBJ</code> authority ‚Äî it'll
fork off a process and keep itself running. From then on, the cron daemon will
run the scheduled jobs at the appropriate time. Every minute, cron will look for
updates to the config files: the main config at <code>/QOpenSys/etc/crontab</code>, files
in <code>/QOpenSys/etc/cron.d</code>, and under configs in <code>/QOpenSys/var/spool/cron</code>.</p>
<p><code>cron</code> stores its configuration in a custom format called a crontab. While this
format was created specifically for cron, other cron-like tools sometime uses
the same format too. An example looks like this:</p>
<pre data-lang="txt" style="background-color:#282c34;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span># This is a crontab, which is a field based format
</span><span># Anything after the hash is a comment
</span><span>#
</span><span># The first 5 fields are space separated:
</span><span># minute hour day_of_month month day_of_week
</span><span>#
</span><span># Multiple values can be specified for each field using commas
</span><span>#
</span><span># The last field is everything after the first 5 and is the
</span><span># command string to execute.
</span><span>#
</span><span># Examples:
</span><span>#
</span><span># run every day at 3 am
</span><span>0 3 * * * bash -c &#39;echo hello!&#39;
</span><span>
</span><span># run at 10:19 pm on the 1st and 15th day of the month as well
</span><span># as well as every Saturday
</span><span>19 22 1,15 * 6 bash -c &#39;echo This is a convoluted schedule&#39;
</span></code></pre>
<p><a href="https://en.wikipedia.org/wiki/Cron#Overview">Wikipedia</a> has further details on
the format or check the documentation by running <code>man 5 crontab</code> if you have
man-db installed üòÅ.</p>
<p>To be quite honest, I tend to forget the format for the time fields, especially
the order of the &quot;day of week&quot; and &quot;day of month&quot; fields so I tend to use an
<a href="https://crontab-generator.org/">online generator</a>.</p>
<p>Users can create and edit their own crontabs with <code>crontab -e</code>. This will open
the user's default editor (using <code>$EDITOR</code> or vi as a fallback if not set).
Users can also edit <em>other user's</em> crontabs with <code>crontab -e -u &lt;user&gt;</code> so long
as they have <code>*USE</code> authority to the target user profile. All jobs in user's
crontabs will run under that user profile.</p>
<p>Cron supports both a deny list and allow list, with the allow list taking
precedence. An empty <code>/QOpenSys/etc/cron.deny</code> is shipped with cron and system
adminstrators may add users to this file to prevent them from <em>editing</em> their
crontab (though the crontab will still run!). If an admin only wants to allow
certain users to be able to create and edit their crontabs, they can create a
<code>/QOpenSys/etc/cron.allow</code>.</p>
<p>In addition to specifically scheduled commands, admins may place scripts or
symlinks to scripts in the <code>/QOpenSys/etc/cron.hourly</code>,
<code>/QOpenSys/etc/cron.daily</code>, and <code>/QOpenSys/etc/cron.monthly</code> directories. These
scripts will be executed by cron once per hour, day, or month as appropriate.</p>
<h3 id="ninja-build">ninja-build</h3>
<p><a href="https://ninja-build.org/">Ninja</a> is a build tool, similar to Make: it generates
a dependency graph from the given rules and determines what to build when
something changes. The difference between Make and Ninja is that the Ninja file
format is not meant to be written by humans, but generated by other build tools,
such as <a href="https://cmake.org/">CMake</a>. In addition, Ninja defaults to
automatically using all the available processors on your system, whereas Make
requires you to specify the number you want to use with <code>-jN</code>.</p>
<p>The easiest way to try out Ninja is by building a project that uses CMake and
specifying the Ninja build generator with the <code>-G</code> option, eg.</p>
<pre data-lang="bash" style="background-color:#282c34;color:#abb2bf;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#7f848e;"># Assuming there&#39;s a CMakeLists.txt in the current directory
</span><span style="color:#e06c75;">mkdir</span><span> build </span><span style="color:#56b6c2;">&amp;&amp; cd</span><span> build
</span><span>
</span><span style="color:#e06c75;">cmake</span><span style="font-style:italic;color:#e06c75;"> -G</span><span> Ninja ..
</span><span>
</span><span style="color:#e06c75;">ninja
</span></code></pre>
<h3 id="minisign">minisign</h3>
<p><a href="https://jedisct1.github.io/minisign/">minisign</a> is a super simple tool for
signing files. Currently if you want to sign a file on IBM i, you can use 
either OpenSSL or GPG, but neither is ideal.</p>
<p>GPG is kind of a behemoth - it can do lots of things, but it has quite a
learning curve to get going and there's lots to criticize about it's very &quot;stuck
in the 90s&quot; defaults, but it certainly <em>can</em> be used to securely sign and verify
files.</p>
<p>OpenSSL also works and has all the same issues as anything using SSL has:
managing your public key infrastructure. You also have to use the <code>openssl</code>
command, which looks very much like it was designed the _IBM Way_‚Ñ¢, what with
its nearly 50 &quot;commands&quot; and various options for each of them. Trying to
remember all the different options and switches is enough to drive one mad.</p>
<p>Instead, if all you want to do is sign files, a much easier tool is minisign.
Minisign is inspired by (and mostly compatible with) OpenBSD's <code>signify</code> tool.
It does one thing (sign/verify files) and supports only one crypto algorithm
(<a href="http://ed25519.cr.yp.to">ed25519</a>) - it's almost impossible to mess things up!</p>
<p>Here's a simple example:</p>
<pre data-lang="bash" style="background-color:#282c34;color:#abb2bf;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#7f848e;"># create a keypair
</span><span style="color:#e06c75;">minisign</span><span style="font-style:italic;color:#e06c75;"> -G
</span><span>
</span><span style="color:#7f848e;"># Sign a file, creating myfile.txt.minisig
</span><span style="color:#e06c75;">minisign</span><span style="font-style:italic;color:#e06c75;"> -S -m</span><span> myfile.txt
</span><span>
</span><span style="color:#7f848e;"># Verify the file
</span><span style="color:#e06c75;">minisign</span><span style="font-style:italic;color:#e06c75;"> -V -m</span><span> myfile.txt</span><span style="font-style:italic;color:#e06c75;"> -p</span><span> minisign.pub
</span></code></pre>
<p>Compare to the equivalent using OpenSSL:</p>
<pre data-lang="bash" style="background-color:#282c34;color:#abb2bf;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#7f848e;"># Generate a keypair (using a 4096-bit RSA key)
</span><span style="color:#e06c75;">openssl</span><span> req</span><span style="font-style:italic;color:#e06c75;"> -nodes -x509 -sha256 -newkey</span><span> rsa:4096</span><span style="font-style:italic;color:#e06c75;"> -keyout</span><span> signing.key</span><span style="font-style:italic;color:#e06c75;"> -out</span><span> signing.crt</span><span style="font-style:italic;color:#e06c75;"> -days</span><span> 365</span><span style="font-style:italic;color:#e06c75;"> -subj </span><span style="color:#98c379;">&quot;/CN=signing&quot;
</span><span>
</span><span style="color:#7f848e;"># Sign the file
</span><span style="color:#e06c75;">openssl</span><span> dgst</span><span style="font-style:italic;color:#e06c75;"> -sha256 -sign</span><span> signing.key</span><span style="font-style:italic;color:#e06c75;"> -out</span><span> myfile.txt.sha256 myfile.txt
</span><span>
</span><span style="color:#7f848e;"># Get the signer&#39;s public key from the certificate
</span><span style="color:#e06c75;">openssl</span><span> x509</span><span style="font-style:italic;color:#e06c75;"> -in</span><span> signing.crt</span><span style="font-style:italic;color:#e06c75;"> -pubkey -noout </span><span style="color:#56b6c2;">&gt;</span><span> signing.pub
</span><span>
</span><span style="color:#7f848e;"># Verify the file
</span><span style="color:#e06c75;">openssl</span><span> dgst</span><span style="font-style:italic;color:#e06c75;"> -sha256 -verify</span><span> signing.pub</span><span style="font-style:italic;color:#e06c75;"> -signature</span><span> myfile.txt.sha256 myfile.txt
</span></code></pre>
<h3 id="libzip">libzip</h3>
<p><a href="https://libzip.org/">libzip</a> is a library for reading, creating, and modifying
Zip archives. It's primarily used on IBM i for the PHP <a href="https://www.php.net/manual/en/book.zip.php">zip
extension</a>. Beyond that, you may
find some use with the <code>zipcmp</code> and <code>zipmerge</code> utilities in the libzip-tools
subpackage.</p>
<h3 id="pv">pv</h3>
<p><a href="http://www.ivarch.com/programs/pv.shtml">pv</a> &quot;pipe viewer&quot; is a tool for
monitoring the progress of data flowing through a shell pipeline. You can insert
it anywhere between two commands in the pipeline to view a progress bar,
estimate of time to completion, transfer speed, etc.</p>
<pre data-lang="txt" style="background-color:#282c34;color:#abb2bf;" class="language-txt "><code class="language-txt" data-lang="txt"><span>$ pv -cN source &lt; matplotlib-3.2.1.tar.gz |
</span><span>  gzip -d | pv -cN gzip |
</span><span>  xz | pv -cN xz &gt; matplotlib-3.2.1.tar.xz
</span><span>   source: 23.0MiB 0:00:18 [1.81MiB/s] [=========&gt;       ] 59% ETA 0:00:12
</span><span>     gzip: 46.4MiB 0:00:19 [2.37MiB/s] [           &lt;=&gt;                   ]
</span><span>       xz: 20.3MiB 0:00:19 [1.85MiB/s] [           &lt;=&gt;                   ]
</span></code></pre>
<h3 id="cups">cups</h3>
<p><a href="https://www.cups.org/">CUPS</a> (Common Unix Printing System) is a printing system
for Unix-like systems. CUPS traditionally includes both a print server, drivers
for various printers, and libraries for interacting with it. At this time, we
are only providing the main CUPS library (libcups), since it is needed by
OpenJDK Java 11.</p>
<p>We are looking to explore further capabilities for integration in the future ‚Äî
perhaps a CUPS driver which can generate a spool file on an output queue or
perhaps CUPS could read from an output queue and route the spool files to a
remote printer? If that is something you'd be interested in, please let me know!</p>
<h2 id="package-updates">Package Updates</h2>
<h3 id="bash">bash</h3>
<p>With the latest update to BASH, there are 3 new IBM i-specific BASH builtin
functions: <code>liblist</code>, <code>cl</code>, and <code>getjobid</code>. These builtins function nearly
identically to the <code>liblist</code>, <code>system</code>, and <code>getjobid</code> commands that exist in
PASE and/or QSH. I have more details about these new builtin functions [here]({%
link _posts/2020-12-23-bash-builtins.md %}).</p>
<h3 id="ca-certificates">ca-certificates</h3>
<p>ca-certificates will now generate a Curl-style certificate bundle at
<code>/QOpenSys/var/lib/ca-certificates/ca-bundle.pem</code>. This may be useful for
applications that need this style of CA trust store.</p>
<h3 id="rpm">rpm</h3>
<p>NOTE: This is mostly useful for rpm <em>packagers</em>.</p>
<p>rpm ships with a new &quot;Build Root Policy&quot; file brp-rm-libtool-control-files which
will automatically run after just prior to the <code>%files</code> sections being packaged
and removes any libtool .la files found. If you were in the habit of removing
these files manually (as we do at IBM), you no longer need to do so.</p>
<h2 id="closing">Closing</h2>
<p>Well, that's it for 2020. It's been quite a year and despite everything going
on, the IBM i Open Source ecosystem has still managed to make great strides.</p>
<p>Of course we wouldn't have gotten nearly as much accomplished this year without
the great team we have here at IBM. Thanks and mad props goes out to Abdirahim,
Eric, Mark, Meng Xu, Naveen, Vasili, Jesse, and more for their amazing
contributions this year.</p>

        </div>

        
        <div class="pagination">
            <div class="pagination__title">
                <span class="pagination__title-h">Read more</span>
                <hr />
            </div>
            <div class="pagination__buttons">
                    <span class="button previous">
                        <a href="https://kadler.io/blog/2020-12-02-nov-oss-updates/">
                            <span class="button__icon">‚Üê</span>&nbsp;
                            <span class="button__text">IBM i Open Source Updates October &amp; November 2020</span>
                        </a>
                    </span>
                
                
                    <span class="button next">
                        <a href="https://kadler.io/blog/2020-12-23-bash-builtins/">
                            <span class="button__text">getjobid, cl, and liblist ‚Äî Oh, My!</span>&nbsp;
                            <span class="button__icon">‚Üí</span>
                        </a>
                    </span>
                </div>
        </div>
    
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>¬© 
    2025
 Korinne Adler</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
